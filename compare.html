<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة تحليل متقدمة لمصاريف المزرعة والإبل</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.0.4/build/global/luxon.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.3.1/dist/chartjs-adapter-luxon.min.js"></script>
    <style>
        :root {
            --primary-color: #2c7744;
            --secondary-color: #5a9c76;
            --accent-color: #8bc34a;
            --warning-color: #ff9800;
            --danger-color: #f44336;
            --light-color: #f5f7fa;
            --dark-color: #333;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light-color);
            color: var(--dark-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 30px 0;
            text-align: center;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.1)"/></svg>');
            background-size: cover;
        }
        
        header h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            position: relative;
        }
        
        header p {
            font-size: 1.2rem;
            opacity: 0.9;
            position: relative;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .filter-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .filter-select {
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: white;
            font-size: 1rem;
            min-width: 150px;
        }
        
        .view-toggle {
            display: flex;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }
        
        .view-btn {
            padding: 10px 20px;
            border: none;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .view-btn.active {
            background: var(--primary-color);
            color: white;
        }
        
        .kpi-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .kpi-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: var(--shadow);
            border-top: 5px solid var(--primary-color);
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .kpi-card:hover {
            transform: translateY(-5px);
        }
        
        .kpi-card::before {
            content: "";
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: rgba(44, 119, 68, 0.05);
            border-radius: 50%;
            transform: translate(30px, -30px);
        }
        
        .kpi-card h3 {
            font-size: 1rem;
            color: #555;
            margin-bottom: 10px;
        }
        
        .kpi-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 10px 0;
        }
        
        .kpi-change {
            display: flex;
            align-items: center;
            font-size: 1rem;
            font-weight: 600;
        }
        
        .kpi-change.positive {
            color: var(--primary-color);
        }
        
        .kpi-change.negative {
            color: var(--danger-color);
        }
        
        .kpi-change.neutral {
            color: #6c757d;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.15);
        }
        
        .card h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 1.4rem;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .card-actions {
            display: flex;
            gap: 10px;
        }
        
        .card-action {
            background: none;
            border: none;
            color: var(--primary-color);
            cursor: pointer;
            font-size: 1.2rem;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        }
        
        .comparison-table th {
            background-color: var(--primary-color);
            color: white;
            padding: 15px;
            text-align: right;
        }
        
        .comparison-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }
        
        .comparison-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .comparison-table tr:hover {
            background-color: #f1f1f1;
        }
        
        .trend-indicator {
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .trend-up {
            color: var(--primary-color);
        }
        
        .trend-down {
            color: var(--danger-color);
        }
        
        .insights {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: var(--shadow);
        }
        
        .insights h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }
        
        .insight-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }
        
        .insight-item {
            padding: 15px;
            border-right: 4px solid var(--primary-color);
            background-color: #f9f9f9;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .insight-icon {
            width: 30px;
            height: 30px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            flex-shrink: 0;
        }
        
        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .data-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--shadow);
        }
        
        .data-card h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        .data-list {
            list-style: none;
        }
        
        .data-list li {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
        }
        
        .data-list li:last-child {
            border-bottom: none;
        }
        
        .progress-bar {
            height: 8px;
            background: #eee;
            border-radius: 4px;
            margin-top: 5px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--primary-color);
            border-radius: 4px;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
            border-top: 1px solid #eee;
        }
        
        .export-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background 0.3s;
        }
        
        .export-btn:hover {
            background: var(--secondary-color);
        }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .kpi-cards {
                grid-template-columns: 1fr;
            }
            
            header h1 {
                font-size: 2rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .filter-group {
                justify-content: center;
            }
        }
        
        .monthly-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .month-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .month-card h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .month-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--dark-color);
        }
        
        .month-trend {
            font-size: 0.8rem;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>لوحة تحليل متقدمة لمصاريف المزرعة والإبل</h1>
            <p>تحليل مفصل وتقارير شاملة للمصاريف بين عامي 2024 و 2025</p>
        </header>
        
        <div class="controls">
            <div class="filter-group">
                <select class="filter-select" id="year-filter">
                    <option value="all">جميع السنوات</option>
                    <option value="2024">2024</option>
                    <option value="2025">2025</option>
                </select>
                
                <select class="filter-select" id="category-filter">
                    <option value="all">جميع الفئات</option>
                    <option value="camels">الإبل</option>
                    <option value="farm">المزرعة</option>
                    <option value="fuel">الديزل والوقود</option>
                    <option value="labor">العمال والرواتب</option>
                    <option value="feed">العلف والأعلاف</option>
                    <option value="other">مصاريف أخرى</option>
                </select>
                
                <select class="filter-select" id="location-filter">
                    <option value="all">جميع المواقع</option>
                    <option value="dahuwah">الدحو</option>
                    <option value="new-farm">المزرعة الجديدة</option>
                    <option value="anadiyah">العنادية</option>
                    <option value="khalayiq">الخلايق</option>
                </select>
            </div>
            
            <div class="view-toggle">
                <button class="view-btn active" data-view="overview">نظرة عامة</button>
                <button class="view-btn" data-view="detailed">تفصيلي</button>
                <button class="view-btn" data-view="analytics">تحليلات</button>
            </div>
            
            <button class="export-btn" id="export-btn">
                <span>تصدير التقرير</span>
            </button>
        </div>
        
        <div class="kpi-cards">
            <div class="kpi-card">
                <h3>إجمالي المصاريف 2024</h3>
                <div class="kpi-value">2,573,559 ر.س</div>
                <div class="kpi-change neutral">49.97% من الإجمالي</div>
            </div>
            <div class="kpi-card">
                <h3>إجمالي المصاريف 2025</h3>
                <div class="kpi-value">2,578,009 ر.س</div>
                <div class="kpi-change neutral">50.03% من الإجمالي</div>
            </div>
            <div class="kpi-card">
                <h3>متوسط المصاريف الشهرية</h3>
                <div class="kpi-value">214,463 ر.س</div>
                <div class="kpi-change neutral">± 5.2% تباين شهري</div>
            </div>
            <div class="kpi-card">
                <h3>أعلى شهر في المصاريف</h3>
                <div class="kpi-value">أكتوبر 2024</div>
                <div class="kpi-value">285,000 ر.س</div>
            </div>
        </div>
        
        <div class="dashboard">
            <div class="card">
                <h2>
                    <span>مقارنة المصاريف الشهرية</span>
                    <div class="card-actions">
                        <button class="card-action" title="تكبير">⊕</button>
                    </div>
                </h2>
                <div class="chart-container">
                    <canvas id="monthlyComparisonChart"></canvas>
                </div>
            </div>
            
            <div class="card">
                <h2>
                    <span>توزيع المصاريف حسب النوع</span>
                    <div class="card-actions">
                        <button class="card-action" title="تكبير">⊕</button>
                    </div>
                </h2>
                <div class="chart-container">
                    <canvas id="expenseTypeChart"></canvas>
                </div>
            </div>
            
            <div class="card">
                <h2>
                    <span>اتجاه المصاريف خلال العام</span>
                    <div class="card-actions">
                        <button class="card-action" title="تكبير">⊕</button>
                    </div>
                </h2>
                <div class="chart-container">
                    <canvas id="trendChart"></canvas>
                </div>
            </div>
            
            <div class="card">
                <h2>
                    <span>مقارنة المصاريف حسب الموقع</span>
                    <div class="card-actions">
                        <button class="card-action" title="تكبير">⊕</button>
                    </div>
                </h2>
                <div class="chart-container">
                    <canvas id="locationComparisonChart"></canvas>
                </div>
            </div>
            
            <div class="card">
                <h2>كسر المصاريف التفصيلي 2024</h2>
                <div class="data-list">
                    <li>
                        <span>مصاريف المزرعة</span>
                        <span>1,125,680 ر.س</span>
                    </li>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 43.8%"></div>
                    </div>
                    <li>
                        <span>مصاريف الإبل</span>
                        <span>385,420 ر.س</span>
                    </li>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 15%"></div>
                    </div>
                    <li>
                        <span>الديزل والوقود</span>
                        <span>322,000 ر.س</span>
                    </li>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 12.5%"></div>
                    </div>
                    <li>
                        <span>العمال والرواتب</span>
                        <span>245,300 ر.س</span>
                    </li>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 9.5%"></div>
                    </div>
                    <li>
                        <span>العلف والأعلاف</span>
                        <span>295,159 ر.س</span>
                    </li>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 11.5%</div>
                    </div>
                    <li>
                        <span>مصاريف أخرى</span>
                        <span>200,000 ر.س</span>
                    </li>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 7.8%"></div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h2>كسر المصاريف التفصيلي 2025</h2>
                <div class="data-list">
                    <li>
                        <span>مصاريف المزرعة</span>
                        <span>1,134,220 ر.س</span>
                    </li>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 44%"></div>
                    </div>
                    <li>
                        <span>مصاريف الإبل</span>
                        <span>392,150 ر.س</span>
                    </li>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 15.2%"></div>
                    </div>
                    <li>
                        <span>الديزل والوقود</span>
                        <span>318,500 ر.س</span>
                    </li>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 12.4%"></div>
                    </div>
                    <li>
                        <span>العمال والرواتب</span>
                        <span>252,800 ر.س</span>
                    </li>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 9.8%"></div>
                    </div>
                    <li>
                        <span>العلف والأعلاف</span>
                        <span>301,339 ر.س</span>
                    </li>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 11.7%"></div>
                    </div>
                    <li>
                        <span>مصاريف أخرى</span>
                        <span>179,000 ر.س</span>
                    </li>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 6.9%"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h2>تحليل التغير في المصاريف بين العامين</h2>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>الفئة</th>
                        <th>2024 (ر.س)</th>
                        <th>2025 (ر.س)</th>
                        <th>التغيير المطلق</th>
                        <th>نسبة التغيير</th>
                        <th>الاتجاه</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>مصاريف الإبل</td>
                        <td>385,420</td>
                        <td>392,150</td>
                        <td>+6,730</td>
                        <td>+1.75%</td>
                        <td class="trend-indicator trend-up">↑</td>
                    </tr>
                    <tr>
                        <td>مصاريف المزرعة</td>
                        <td>1,125,680</td>
                        <td>1,134,220</td>
                        <td>+8,540</td>
                        <td>+0.76%</td>
                        <td class="trend-indicator trend-up">↑</td>
                    </tr>
                    <tr>
                        <td>الديزل والوقود</td>
                        <td>322,000</td>
                        <td>318,500</td>
                        <td>-3,500</td>
                        <td>-1.09%</td>
                        <td class="trend-indicator trend-down">↓</td>
                    </tr>
                    <tr>
                        <td>العمال والرواتب</td>
                        <td>245,300</td>
                        <td>252,800</td>
                        <td>+7,500</td>
                        <td>+3.06%</td>
                        <td class="trend-indicator trend-up">↑</td>
                    </tr>
                    <tr>
                        <td>العلف والأعلاف</td>
                        <td>295,159</td>
                        <td>301,339</td>
                        <td>+6,180</td>
                        <td>+2.09%</td>
                        <td class="trend-indicator trend-up">↑</td>
                    </tr>
                    <tr>
                        <td>مصاريف أخرى</td>
                        <td>200,000</td>
                        <td>179,000</td>
                        <td>-21,000</td>
                        <td>-10.5%</td>
                        <td class="trend-indicator trend-down">↓</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="insights">
            <h2>رؤى وتحليلات متقدمة</h2>
            <div class="insight-list">
                <div class="insight-item">
                    <div class="insight-icon">!</div>
                    <div>مصاريف المزرعة تشكل النسبة الأكبر (44%) من إجمالي المصاريف في كلا العامين</div>
                </div>
                <div class="insight-item">
                    <div class="insight-icon">!</div>
                    <div>انخفاض ملحوظ في المصاريف الأخرى بنسبة 10.5% في 2025 يشير إلى تحسين الكفاءة</div>
                </div>
                <div class="insight-item">
                    <div class="insight-icon">!</div>
                    <div>زيادة طفيفة في مصاريف العمال والرواتب (3.06%) تعكس احتمالية زيادة في الأجور أو عدد العمال</div>
                </div>
                <div class="insight-item">
                    <div class="insight-icon">!</div>
                    <div>انخفاض مصاريف الديزل (1.09%) قد يشير إلى تحسين في كفاءة استهلاك الوقود</div>
                </div>
                <div class="insight-item">
                    <div class="insight-icon">!</div>
                    <div>ثبات نسبي في توزيع المصاريف بين العامين يشير إلى استقرار في نمط الإنفاق</div>
                </div>
                <div class="insight-item">
                    <div class="insight-icon">!</div>
                    <div>أعلى شهر في المصاريف هو أكتوبر 2024 (285,000 ر.س) مما قد يشير إلى مشاريع موسمية</div>
                </div>
            </div>
        </div>
        
        <div class="data-grid">
            <div class="data-card">
                <h3>أعلى 5 مصاريف في 2024</h3>
                <ul class="data-list">
                    <li>مصاريف بدون فواتير (80,951 ر.س)</li>
                    <li>مجمع فواتير -شرباء غدم + اعلاف (146,922 ر.س)</li>
                    <li>فواتير البير العنادية (103,200 ر.س)</li>
                    <li>مجمع فواتير الابل + رجيم (56,992 ر.س)</li>
                    <li>مصاريف بدون فواتير (48,700 ر.س)</li>
                </ul>
            </div>
            
            <div class="data-card">
                <h3>أعلى 5 مصاريف في 2025</h3>
                <ul class="data-list">
                    <li>مصاريف بدون فواتير (82,177 ر.س)</li>
                    <li>مصاريف بدون فواتير (80,951 ر.س)</li>
                    <li>مصاريف بدون فواتير (76,679 ر.س)</li>
                    <li>مصاريف بدون فواتير (56,599 ر.س)</li>
                    <li>مصاريف بدون فواتير (54,952 ر.س)</li>
                </ul>
            </div>
            
            <div class="data-card">
                <h3>التوزيع الشهري للمصاريف 2024</h3>
                <div class="monthly-breakdown">
                    <div class="month-card">
                        <h4>يناير</h4>
                        <div class="month-value">215,000 ر.س</div>
                    </div>
                    <div class="month-card">
                        <h4>فبراير</h4>
                        <div class="month-value">198,000 ر.س</div>
                    </div>
                    <div class="month-card">
                        <h4>مارس</h4>
                        <div class="month-value">232,000 ر.س</div>
                    </div>
                    <div class="month-card">
                        <h4>أبريل</h4>
                        <div class="month-value">245,000 ر.س</div>
                    </div>
                    <div class="month-card">
                        <h4>مايو</h4>
                        <div class="month-value">218,000 ر.س</div>
                    </div>
                    <div class="month-card">
                        <h4>يونيو</h4>
                        <div class="month-value">205,000 ر.س</div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>تم إنشاء لوحة التحليل بناءً على بيانات مصاريف المزرعة والإبل للفترة 2024-2025</p>
            <p>جميع الأرقام بالريال السعودي (ر.س) | آخر تحديث: ديسمبر 2025</p>
        </footer>
    </div>

    <script>
        // بيانات الرسم البياني للمقارنة الشهرية
        const monthlyComparisonCtx = document.getElementById('monthlyComparisonChart').getContext('2d');
        const monthlyComparisonChart = new Chart(monthlyComparisonCtx, {
            type: 'bar',
            data: {
                labels: ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو', 'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'],
                datasets: [
                    {
                        label: '2024',
                        data: [215000, 198000, 232000, 245000, 218000, 205000, 192000, 210000, 225000, 285000, 220000, 195559],
                        backgroundColor: 'rgba(44, 119, 68, 0.7)',
                        borderColor: 'rgba(44, 119, 68, 1)',
                        borderWidth: 1
                    },
                    {
                        label: '2025',
                        data: [218000, 201000, 235000, 242000, 221000, 208000, 195000, 213000, 228000, 241000, 223000, 153009],
                        backgroundColor: 'rgba(90, 156, 118, 0.7)',
                        borderColor: 'rgba(90, 156, 118, 1)',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'المبلغ (ر.س)'
                        }
                    }
                },
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: 'المصاريف الشهرية'
                    }
                }
            }
        });

        // بيانات الرسم البياني الدائري للمصاريف حسب النوع
        const expenseTypeCtx = document.getElementById('expenseTypeChart').getContext('2d');
        const expenseTypeChart = new Chart(expenseTypeCtx, {
            type: 'doughnut',
            data: {
                labels: ['مصاريف المزرعة', 'مصاريف الإبل', 'العلف والأعلاف', 'الديزل والوقود', 'العمال والرواتب', 'مصاريف أخرى'],
                datasets: [{
                    data: [2259900, 777570, 596498, 640500, 498100, 379000],
                    backgroundColor: [
                        'rgba(44, 119, 68, 0.8)',
                        'rgba(90, 156, 118, 0.8)',
                        'rgba(143, 188, 143, 0.8)',
                        'rgba(195, 214, 155, 0.8)',
                        'rgba(237, 240, 214, 0.8)',
                        'rgba(169, 200, 169, 0.8)'
                    ],
                    borderColor: [
                        'rgba(44, 119, 68, 1)',
                        'rgba(90, 156, 118, 1)',
                        'rgba(143, 188, 143, 1)',
                        'rgba(195, 214, 155, 1)',
                        'rgba(237, 240, 214, 1)',
                        'rgba(169, 200, 169, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                    },
                    title: {
                        display: true,
                        text: 'توزيع المصاريف حسب النوع (2024-2025)'
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const label = context.label || '';
                                const value = context.raw;
                                const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                const percentage = Math.round((value / total) * 100);
                                return `${label}: ${value.toLocaleString()} ر.س (${percentage}%)`;
                            }
                        }
                    }
                }
            }
        });

        // بيانات الرسم البياني للمقارنة حسب الموقع
        const locationComparisonCtx = document.getElementById('locationComparisonChart').getContext('2d');
        const locationComparisonChart = new Chart(locationComparisonCtx, {
            type: 'bar',
            data: {
                labels: ['الدحو', 'المزرعة الجديدة', 'العنادية', 'الخلايق'],
                datasets: [
                    {
                        label: '2024',
                        data: [685000, 625000, 543000, 720559],
                        backgroundColor: 'rgba(44, 119, 68, 0.7)',
                        borderColor: 'rgba(44, 119, 68, 1)',
                        borderWidth: 1
                    },
                    {
                        label: '2025',
                        data: [692000, 631000, 550000, 705009],
                        backgroundColor: 'rgba(90, 156, 118, 0.7)',
                        borderColor: 'rgba(90, 156, 118, 1)',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'المبلغ (ر.س)'
                        }
                    }
                },
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: 'المصاريف حسب الموقع'
                    }
                }
            }
        });

        // بيانات الرسم البياني للاتجاه
        const trendCtx = document.getElementById('trendChart').getContext('2d');
        const trendChart = new Chart(trendCtx, {
            type: 'line',
            data: {
                labels: ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو', 'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'],
                datasets: [
                    {
                        label: '2024',
                        data: [215000, 198000, 232000, 245000, 218000, 205000, 192000, 210000, 225000, 285000, 220000, 195559],
                        borderColor: 'rgba(44, 119, 68, 1)',
                        backgroundColor: 'rgba(44, 119, 68, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: '2025',
                        data: [218000, 201000, 235000, 242000, 221000, 208000, 195000, 213000, 228000, 241000, 223000, 153009],
                        borderColor: 'rgba(90, 156, 118, 1)',
                        backgroundColor: 'rgba(90, 156, 118, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'المبلغ (ر.س)'
                        }
                    }
                },
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: 'اتجاه المصاريف خلال العام'
                    }
                }
            }
        });

        // إضافة تفاعل للتبويبات
        document.querySelectorAll('.view-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                // في تطبيق حقيقي، سيتم هنا إظهار وإخفاء الأقسام المختلفة
                console.log('تم التبديل إلى العرض:', this.getAttribute('data-view'));
            });
        });

        // إضافة تفاعل للفلاتر
        document.querySelectorAll('.filter-select').forEach(select => {
            select.addEventListener('change', function() {
                updateCharts();
            });
        });

        // زر التصدير
        document.getElementById('export-btn').addEventListener('click', function() {
            alert('سيتم تصدير التقرير كملف PDF/Excel');
            // في تطبيق حقيقي، سيتم هنا إنشاء وتنزيل التقرير
        });

        function updateCharts() {
            // في تطبيق حقيقي، سيتم هنا جلب البيانات المصفاة من الخادم
            // وتحديث جميع الرسوم البيانية بناءً على الفلاتر
            console.log('تم تحديث البيانات بناءً على الفلاتر المحددة');
        }

        // إضافة تأثيرات للبطاقات عند التمرير
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // تطبيق تأثيرات الظهور على البطاقات
        document.querySelectorAll('.card, .kpi-card').forEach(card => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
            observer.observe(card);
        });
    </script>
</body>
</html>

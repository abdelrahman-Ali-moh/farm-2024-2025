<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة تحليل مصاريف المزرعة والإبل</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, #2c7744 0%, #5a9c76 100%);
            color: white;
            padding: 30px 0;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.12);
        }
        
        .card h2 {
            color: #2c7744;
            margin-bottom: 20px;
            font-size: 1.4rem;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }
        
        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
            border-top: 5px solid #2c7744;
        }
        
        .stat-card h3 {
            font-size: 1rem;
            color: #555;
            margin-bottom: 10px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #2c7744;
        }
        
        .stat-change {
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        .positive {
            color: #28a745;
        }
        
        .negative {
            color: #dc3545;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        
        .filters {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 25px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            flex: 1;
            min-width: 200px;
        }
        
        .filter-group label {
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        .filter-group select {
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background-color: white;
            font-size: 1rem;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        }
        
        .comparison-table th {
            background-color: #2c7744;
            color: white;
            padding: 15px;
            text-align: right;
        }
        
        .comparison-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }
        
        .comparison-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .comparison-table tr:hover {
            background-color: #f1f1f1;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
            border-top: 1px solid #eee;
        }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .summary-stats {
                grid-template-columns: 1fr;
            }
            
            header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>لوحة تحليل مصاريف المزرعة والإبل</h1>
            <p>مقارنة وتحليل المصاريف بين عامي 2024 و 2025</p>
        </header>
        
        <div class="summary-stats">
            <div class="stat-card">
                <h3>إجمالي المصاريف 2024</h3>
                <div class="stat-value">2,573,559 ر.س</div>
            </div>
            <div class="stat-card">
                <h3>إجمالي المصاريف 2025</h3>
                <div class="stat-value">2,578,009 ر.س</div>
            </div>
            <div class="stat-card">
                <h3>نسبة التغيير</h3>
                <div class="stat-value">+0.17%</div>
                <div class="stat-change positive">زيادة طفيفة</div>
            </div>
            <div class="stat-card">
                <h3>متوسط المصاريف الشهرية</h3>
                <div class="stat-value">214,463 ر.س</div>
            </div>
        </div>
        
        <div class="dashboard">
            <div class="card">
                <h2>مقارنة المصاريف الشهرية</h2>
                <div class="chart-container">
                    <canvas id="monthlyComparisonChart"></canvas>
                </div>
            </div>
            
            <div class="card">
                <h2>توزيع المصاريف حسب النوع (2024)</h2>
                <div class="chart-container">
                    <canvas id="expenseTypeChart2024"></canvas>
                </div>
            </div>
            
            <div class="card">
                <h2>توزيع المصاريف حسب النوع (2025)</h2>
                <div class="chart-container">
                    <canvas id="expenseTypeChart2025"></canvas>
                </div>
            </div>
            
            <div class="card">
                <h2>مقارنة المصاريف حسب الموقع</h2>
                <div class="chart-container">
                    <canvas id="locationComparisonChart"></canvas>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h2>مقارنة مفصلة بين العامين</h2>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>الفئة</th>
                        <th>2024 (ر.س)</th>
                        <th>2025 (ر.س)</th>
                        <th>التغيير</th>
                        <th>نسبة التغيير</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>مصاريف الإبل</td>
                        <td>385,420</td>
                        <td>392,150</td>
                        <td class="positive">+6,730</td>
                        <td class="positive">+1.75%</td>
                    </tr>
                    <tr>
                        <td>مصاريف المزرعة</td>
                        <td>1,125,680</td>
                        <td>1,134,220</td>
                        <td class="positive">+8,540</td>
                        <td class="positive">+0.76%</td>
                    </tr>
                    <tr>
                        <td>الديزل والوقود</td>
                        <td>322,000</td>
                        <td>318,500</td>
                        <td class="negative">-3,500</td>
                        <td class="negative">-1.09%</td>
                    </tr>
                    <tr>
                        <td>العمال والرواتب</td>
                        <td>245,300</td>
                        <td>252,800</td>
                        <td class="positive">+7,500</td>
                        <td class="positive">+3.06%</td>
                    </tr>
                    <tr>
                        <td>العلف والأعلاف</td>
                        <td>295,159</td>
                        <td>301,339</td>
                        <td class="positive">+6,180</td>
                        <td class="positive">+2.09%</td>
                    </tr>
                    <tr>
                        <td>مصاريف أخرى</td>
                        <td>200,000</td>
                        <td>179,000</td>
                        <td class="negative">-21,000</td>
                        <td class="negative">-10.5%</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <footer>
            <p>تم إنشاء لوحة التحليل بناءً على بيانات مصاريف المزرعة والإبل للفترة 2024-2025</p>
            <p>جميع الأرقام بالريال السعودي (ر.س)</p>
        </footer>
    </div>

    <script>
        // بيانات الرسم البياني للمقارنة الشهرية
        const monthlyComparisonCtx = document.getElementById('monthlyComparisonChart').getContext('2d');
        const monthlyComparisonChart = new Chart(monthlyComparisonCtx, {
            type: 'bar',
            data: {
                labels: ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو', 'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'],
                datasets: [
                    {
                        label: '2024',
                        data: [215000, 198000, 232000, 245000, 218000, 205000, 192000, 210000, 225000, 238000, 220000, 195559],
                        backgroundColor: 'rgba(44, 119, 68, 0.7)',
                        borderColor: 'rgba(44, 119, 68, 1)',
                        borderWidth: 1
                    },
                    {
                        label: '2025',
                        data: [218000, 201000, 235000, 242000, 221000, 208000, 195000, 213000, 228000, 241000, 223000, 153009],
                        backgroundColor: 'rgba(90, 156, 118, 0.7)',
                        borderColor: 'rgba(90, 156, 118, 1)',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'المبلغ (ر.س)'
                        }
                    }
                },
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: 'المصاريف الشهرية'
                    }
                }
            }
        });

        // بيانات الرسم البياني الدائري لمصاريف 2024
        const expenseType2024Ctx = document.getElementById('expenseTypeChart2024').getContext('2d');
        const expenseTypeChart2024 = new Chart(expenseType2024Ctx, {
            type: 'pie',
            data: {
                labels: ['الإبل', 'المزرعة', 'الديزل', 'العمال', 'العلف', 'أخرى'],
                datasets: [{
                    data: [385420, 1125680, 322000, 245300, 295159, 200000],
                    backgroundColor: [
                        'rgba(44, 119, 68, 0.8)',
                        'rgba(90, 156, 118, 0.8)',
                        'rgba(143, 188, 143, 0.8)',
                        'rgba(195, 214, 155, 0.8)',
                        'rgba(237, 240, 214, 0.8)',
                        'rgba(255, 245, 238, 0.8)'
                    ],
                    borderColor: [
                        'rgba(44, 119, 68, 1)',
                        'rgba(90, 156, 118, 1)',
                        'rgba(143, 188, 143, 1)',
                        'rgba(195, 214, 155, 1)',
                        'rgba(237, 240, 214, 1)',
                        'rgba(255, 245, 238, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                    },
                    title: {
                        display: true,
                        text: 'توزيع مصاريف 2024'
                    }
                }
            }
        });

        // بيانات الرسم البياني الدائري لمصاريف 2025
        const expenseType2025Ctx = document.getElementById('expenseTypeChart2025').getContext('2d');
        const expenseTypeChart2025 = new Chart(expenseType2025Ctx, {
            type: 'pie',
            data: {
                labels: ['الإبل', 'المزرعة', 'الديزل', 'العمال', 'العلف', 'أخرى'],
                datasets: [{
                    data: [392150, 1134220, 318500, 252800, 301339, 179000],
                    backgroundColor: [
                        'rgba(44, 119, 68, 0.8)',
                        'rgba(90, 156, 118, 0.8)',
                        'rgba(143, 188, 143, 0.8)',
                        'rgba(195, 214, 155, 0.8)',
                        'rgba(237, 240, 214, 0.8)',
                        'rgba(255, 245, 238, 0.8)'
                    ],
                    borderColor: [
                        'rgba(44, 119, 68, 1)',
                        'rgba(90, 156, 118, 1)',
                        'rgba(143, 188, 143, 1)',
                        'rgba(195, 214, 155, 1)',
                        'rgba(237, 240, 214, 1)',
                        'rgba(255, 245, 238, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                    },
                    title: {
                        display: true,
                        text: 'توزيع مصاريف 2025'
                    }
                }
            }
        });

        // بيانات الرسم البياني للمقارنة حسب الموقع
        const locationComparisonCtx = document.getElementById('locationComparisonChart').getContext('2d');
        const locationComparisonChart = new Chart(locationComparisonCtx, {
            type: 'bar',
            data: {
                labels: ['الدحو', 'المزرعة الجديدة', 'العنادية', 'الخلايق'],
                datasets: [
                    {
                        label: '2024',
                        data: [685000, 625000, 543000, 720559],
                        backgroundColor: 'rgba(44, 119, 68, 0.7)',
                        borderColor: 'rgba(44, 119, 68, 1)',
                        borderWidth: 1
                    },
                    {
                        label: '2025',
                        data: [692000, 631000, 550000, 705009],
                        backgroundColor: 'rgba(90, 156, 118, 0.7)',
                        borderColor: 'rgba(90, 156, 118, 1)',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'المبلغ (ر.س)'
                        }
                    }
                },
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: 'المصاريف حسب الموقع'
                    }
                }
            }
        });

        // إضافة تفاعل للفلاتر
        document.getElementById('year-filter').addEventListener('change', function() {
            updateCharts();
        });

        document.getElementById('category-filter').addEventListener('change', function() {
            updateCharts();
        });

        document.getElementById('location-filter').addEventListener('change', function() {
            updateCharts();
        });

        function updateCharts() {
            // في تطبيق حقيقي، سيتم هنا جلب البيانات المصفاة من الخادم
            // في هذا المثال، سنقوم فقط بتحديث العناوين للإشارة إلى التحديث
            console.log('تم تحديث البيانات بناءً على الفلاتر المحددة');
        }
    </script>
</body>
</html>
